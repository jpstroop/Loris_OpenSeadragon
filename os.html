<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
  		<title>JSONP Test</title>
  		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
  		<script src="js/openseadragon.js"></script>
  		<link rel="stylesheet" type="text/css" href="css/style.css">
	</head>
	<body>
		<div id="container">
			<div id="viewer" class="openseadragon"></div>
		</div>

		<script>

		var osd_config = {
			id: "viewer",
			prefixUrl: "images/",
			preserveViewport: true,
			visibilityRatio: 1,
			minZoomLevel: 1,
			tileSources: []
		}

		function update_tileSources(data) {
			// data.image_host = "http://ltopstroop2.princeton.edu:5004"; // shouldn't need this
			osd_config.tileSources.push(data);
		}

		$.when (
			$.getJSON('http://libimages.princeton.edu/loris/pudl0001%2F4609321%2Fs42%2F00000001.jp2/info.json?callback=?',
				function(data) {
					update_tileSources(data);
				}
			),
			$.getJSON('http://libimages.princeton.edu/loris/pudl0001%2F4609321%2Fs42%2F00000002.jp2/info.json?callback=?',
				function(data) {
					update_tileSources(data);
				}
			),
			$.getJSON('http://libimages.princeton.edu/loris/pudl0001%2F4609321%2Fs42%2F00000003.jp2/info.json?callback=?',
				function(data) {
					update_tileSources(data);
				}
			),
			$.getJSON('http://libimages.princeton.edu/loris/pudl0001%2F4609321%2Fs42%2F00000004.jp2/info.json?callback=?',
				function(data) {
					update_tileSources(data);
				}
			),
			$.getJSON('http://libimages.princeton.edu/loris/pudl0001%2F4609321%2Fs42%2F00000005.jp2/info.json?callback=?',
				function(data) {
					update_tileSources(data);
				}
			)
		).then( function() {
			OpenSeadragon(osd_config)
		})
		</script>
	</body>
</html>